---
layout: post
title: Diamond 软件的使用小技巧

---

## 用前必读
1. 建议学习版 (你懂的) Diamond 的同学关闭自动更新. 
2. 请在使用过程中记得经常使用 ctrl + s 快捷键进行保存. 

## 导入与导出
Q: (Diamond 3.x) 为什么导入 cif 时程序会崩溃?  

A: 可能是因为导入的是包含有 hkl 数据的新版 cif 文件. 请将 cif 在记事本中打开后删去 hkl 的部分. 由于长度较长, 最简便的操作是将前半部分选中后复制, 全选, 粘贴, 保存 (ctrl + c, a, v, s) . 

Q: 导出什么图片格式比较好? 

A: 对于输出到 Photoshop 或 Powerpoint 的图片, 建议选择 .png 格式. 对于导出到 3DS MAX 的三维模型, 请选择 .wrl 格式. 

Q: 为什么我导出的图片很小? 

A: 请在 Picture-Layout 中选择 Bitmap, 并设置好 DPI. 对于一般的论文插图, 请使用 300 以上的 DPI. 为了在后期导出时减少误操作可能, 建议在第一张图就更改此设置. 此外, 如果在绘制时卡顿严重, 可以将此项调为默认设置, 以减少电脑压力. 

## 图像绘制

Q: 如何快速切换选择、移动、旋转、缩放模式? 

A: Diamond 没有切换模式的快捷键. 但是, 在选择模式以外的任意模式均可以使用 Escape (ESC) 回到选择模式. 

Q: 为什么调整全局外观设置会使得部分原子、化学键的外观发生改变? 

A: 全局外观设置会覆盖目前所有的个体外观设置. 所以在修改外观时, 请尽量使用全局外观设置进行修改, 尽可能不要通过选择后双击的方式修改. 

Q: 为什么默认的颜色很丑? 

A: Diamond 的特点是每一种元素的颜色都不同. 请使用自定义颜色修改成自己满意的颜色, Diamond 会自动记忆. 此外, 在颜色设置面板中会记忆最近设置的自定义颜色 (在自定义颜色按钮上面一行) , 可以在此处快速设置. 建议在绘制第一张图时就进行颜色设置, 这样在后续的图中都会保留最初设置的颜色. 

Q: 为什么键会一边大一边小? 

A: 当化学键宽度大于原子直径时, 就会出现这种情况. 此外, 视角设置也可能会导致这个问题. 

Q: 多个多面体重叠、交错时, 叠放次序的错乱和错误的透明度如何解决? 

A: 请使用 Photoshop 对出现渲染问题的部分进行修改. 修复画笔和图层蒙版可能对解决问题有所帮助. 

## 绘制技巧

Q: 假原子如何批量插入? 

A: 第一种方法, 使用 insert atom 插入后设置成键, 通过一次生长操作生成. 第二种方法, 插入一个假原子后使用 fill 命令填充. 建议不要在同一坐标的多处位置使用多次插入假原子命令, 容易在需要多种假原子的结构中出现问题. 

Q: 需要将穿插或自穿结构的每一套绘制成不同外观, 如何快速操作? 

A: 将所有元素在一张图中绘制会眼花缭乱. 请善用复制粘贴功能. 在同一套结构的不同图之间可以进行互相复制粘贴操作. 其中, 原子、化学键会发生外观覆盖, 多面体不会 (3.x 会在一个中心产生多个多面体, 4.x尚待验证). 

Q: 如何批量插入距离为 10 以上的键? 

A: 4-10 Å 距离的键可以通过直接修改范围得到. 但是 10 Å 以上的需要通过在成键设置页修改范德华半径比例范围插入. 不断的修改与reset直至到达所需的长度范围. 在插入后需要对结构进行检查, 不需要的键可以通过对 Table of created bonds 以长度排序进行批量删除. 

Q: 以化学键作为孔道内插入棒时, 键不够粗怎么办? 

A: Diamond对于化学键有 2.5 Å 的限制. 当键不能达到 2.5 Å 时, 请将两端原子大小调整至 2.5 Å 以上；如果 2.5 Å 不足以达到所需的粗度, 请在晶胞大小设置中酌情等比例缩小 a, b, c. 请注意：这项设置会使得整体尺寸比例发生变化, 建议在文档中通过复制-粘贴方式添加一个新的 Structure. 

Q: 如何插入两端封口的圆柱?

A: 有完美实现的方法, 但是暂时没有成功. 目前已知的方法是将两端原子分别设置为透明度 100% 和 Invisible, 但是键会变短.

Q: 想要做叠放、透明度、渐变等效果? 

A: 比起研究 Diamond 如何做出, 不如选择 Photoshop 叠图层, 加蒙版. 

Q: 对颜色和材质依旧不够满意? 

A: 请使用 Cinema 4D或 3DS MAX 进行二次渲染. 进行 3DS MAX 的准备如下：将化学键改为单色键 (thick) , 然后保存为 .obj 文件 (旧版本需要将每种原子的尺寸半径改为不同值, 保存格式选择.wrl格式). 建议使用VRay渲染器, 相比默认的 3DS MAX 的材质、灯光、渲染下限更高. 

2024.10.05 更新:
Q: 如何使用 Diamond 扣取原子团簇?

A: 在选择好中心团簇后, 使用 builf-fill-sphere 功能, 填充周边 4-6 埃内的原子, 然后进行生长操作. 根据金属配位簇的模式, 在生长完最后一圈想要的金属簇和配位原子后, 取消金属簇与 N, O, C, ... 的连接, 长完最后的端基原子.

导出该原子簇, 使用 GV 进行进一步的边缘饱和与羧基删除操作.
